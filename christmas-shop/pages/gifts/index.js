const data = {
    "items": [
        {
            "name": "Bug Magnet",
            "description": "Able to find bugs in code like they were placed there on purpose.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+200",
                "dream": "+400"
            }
        },

        {
            "name": "Console.log Guru",
            "description": "Uses console.log like a crystal ball to find any issue.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+200",
                "dream": "+400"
            }
        },

        {
            "name": "Shortcut Cheater",
            "description": "Knows every keyboard shortcut like they were born with them.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+400",
                "dream": "+200"
            }
        },

        {
            "name": "Merge Master",
            "description": "Merges branches in Git without conflicts, like a wizard during an exam.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+200",
                "create": "+500",
                "love": "+200",
                "dream": "+300"
            }
        },

        {
            "name": "Async Tamer",
            "description": "Handles asynchronous code and promises like well-trained pets.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+100",
                "create": "+400",
                "love": "+200",
                "dream": "+300"
            }
        },

        {
            "name": "CSS Tamer",
            "description": "Can make Flexbox and Grid work together like they were always best friends.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+200",
                "create": "+500",
                "love": "+200",
                "dream": "+300"
            }
        },

        {
            "name": "Time Hacker",
            "description": "Writes code at the last moment but always meets the deadline.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+500",
                "dream": "+200"
            }
        },

        {
            "name": "Layout Master",
            "description": "Creates perfect layouts on the first try, like they can read the designer's mind.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+300",
                "love": "+200",
                "dream": "+200"
            }
        },

        {
            "name": "Documentation Whisperer",
            "description": "Understands cryptic documentation as if they wrote it themselves.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+200",
                "dream": "+100"
            }
        },

        {
            "name": "Feedback Master",
            "description": "Accepts client revisions with the Zen calm of Buddha.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+300",
                "create": "+500",
                "love": "+300",
                "dream": "+400"
            }
        },

        {
            "name": "Code Minimalist",
            "description": "Writes code so concise that one line does more than a whole file.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+500",
                "dream": "+200"
            }
        },

        {
            "name": "Pixel-Perfect Magician",
            "description": "Aligns elements to the last pixel, even when the design looks abstract.",
            "img": "../../assets/images/gift-for-work.png",
            "class": "for-work",
            "category": "For Work",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+400",
                "dream": "+400"
            }
        },

        {
            "name": "Posture Levitation",
            "description": "Can sit for hours, but maintains perfect posture like a ballerina.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+500",
                "love": "+500",
                "dream": "+400"
            }
        },

        {
            "name": "Step Master",
            "description": "Gets 10,000 steps a day even while sitting at the computer.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+300",
                "love": "+500",
                "dream": "+400"
            }
        },

        {
            "name": "Snack Resister",
            "description": "Ignoring desktop snacks like a strict dietician.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+100",
                "love": "+200",
                "dream": "+400"
            }
        },

        {
            "name": "Hydration Bot",
            "description": "Drinks the recommended 2 liters of water a day like a health-programmed robot.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+500",
                "create": "+300",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Sleep Overlord",
            "description": "Sleeps 6 hours but feels like they had 10.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+500",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Break Guru",
            "description": "Takes a stretch break every hour without forgetting, no matter how focused.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+300",
                "create": "+300",
                "love": "+300",
                "dream": "+400"
            }
        },

        {
            "name": "Eye Protector",
            "description": "Can work all day at the monitor without feeling like their eyes are on fire.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+100",
                "create": "+300",
                "love": "+500",
                "dream": "+400"
            }
        },

        {
            "name": "Stress Dodger",
            "description": "Masters meditation right at the keyboard.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+100",
                "create": "+400",
                "love": "+200",
                "dream": "+400"
            }
        },

        {
            "name": "Yoga Coder",
            "description": "Easily switches from coding to yoga and back.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+400",
                "love": "+400",
                "dream": "+400"
            }
        },

        {
            "name": "Healthy Snacker",
            "description": "Always picks fruit, even when chocolate is within arm’s reach.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+300",
                "love": "+200",
                "dream": "+400"
            }
        },

        {
            "name": "Chair Exerciser",
            "description": "Manages to work out without leaving the chair.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+500",
                "create": "+500",
                "love": "+500",
                "dream": "+400"
            }
        },

        {
            "name": "Caffeine Filter",
            "description": "Drinks coffee at night and still falls asleep with no problem.",
            "img": "../../assets/images/gift-for-health.png",
            "class": "for-health",
            "category": "For Health",
            "superpowers": {
                "live": "+400",
                "create": "+300",
                "love": "+500",
                "dream": "+200"
            }
        },

        {
            "name": "Joy Charger",
            "description": "Finds joy in the little things—even in a build that finishes unexpectedly fast.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+200",
                "create": "+200",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Error Laugher",
            "description": "Laughs at code errors like they’re jokes instead of getting angry.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Bug Acceptance Guru",
            "description": "Accepts bugs as part of the journey to perfection — it’s just another task.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+500",
                "dream": "+400"
            }
        },

        {
            "name": "Spontaneous Coding Philosopher",
            "description": "Philosophically accepts any client suggestion after a long refactor.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+500",
                "dream": "+400"
            }
        },

        {
            "name": "Deadline Sage",
            "description": "Remains zen even when the deadline is close and the project manager is stressed.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+200",
                "create": "+200",
                "love": "+300",
                "dream": "+500"
            }
        },

        {
            "name": "Inspiration Maestro",
            "description": "Finds inspiration on an empty screen as if masterpieces are already there.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+400",
                "dream": "+100"
            }
        },

        {
            "name": "Peace Keeper",
            "description": "Maintains inner calm even in moments of intense crisis.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+200",
                "create": "+200",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Empathy Guru",
            "description": "Feels the team’s mood and can lift everyone’s spirits.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+500",
                "create": "+200",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Laughter Generator",
            "description": "Can lighten any tense situation with a joke that even bugs laugh at.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+200",
                "dream": "+500"
            }
        },

        {
            "name": "Pause Master",
            "description": "Knows when to just step back from the keyboard and breathe.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+100",
                "dream": "+100"
            }
        },

        {
            "name": "Coder Healer",
            "description": "Can support a colleague in their darkest hour, even if it’s a 500 error.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+500",
                "dream": "+500"
            }
        },

        {
            "name": "Music Code Curator",
            "description": "Creates work playlists so good, even deadlines follow the rhythm.",
            "img": "../../assets/images/gift-for-harmony.png",
            "class": "for-harmony",
            "category": "For Harmony",
            "superpowers": {
                "live": "+300",
                "create": "+200",
                "love": "+300",
                "dream": "+200"
            }
        }
    ]
}

const burger = document.querySelector(".burger");
const menu = document.querySelector(".mobile-menu");
const menuLinks = document.querySelectorAll(".mobile-nav-item");
const body = document.querySelector("body");
const bestCards = document.querySelector('.best-cards');
const allCards = document.querySelector(".best-link-all");
const forWorkCards = document.querySelector(".best-link-for-work");
const forHealthCards = document.querySelector(".best-link-for-health");
const forHarmonyCards = document.querySelector(".best-link-for-harmony");
const backgroundPopap = document.querySelector(".no-scroll-background");
const popap = document.querySelector(".popap");

// Функция для переключения состояния меню и фона
function toggleMenu() {
    burger.classList.toggle("rotate");
    menu.classList.toggle("open");
    if (menu.classList.contains("open")) {
        body.classList.add("no-scroll");
    } else {
        body.classList.remove("no-scroll");
    }
}

// Обработчик клика по бургер-меню
burger.addEventListener("click", toggleMenu);

// Обработчики кликов на ссылки в меню
menuLinks.forEach(function (link) {
    link.addEventListener("click", function () {
        if (menu.classList.contains("open")) {
            toggleMenu();
        }
    });
});


//Функция заполнения карточек
function populateBestCards(category) {
    bestCards.innerHTML = '';

    data.items
        .filter(function (item) {
            return category === 'all' || item.class === category;
        })
        .forEach(function (item) {
            const card = document.createElement('div');
            card.className = 'best-card';
            card.innerHTML = `
        <div class="best-card-image"><img src="${item.img}" alt="${item.category}"></div>
        <div class="best-card-description">
            <div class="best-card-title ${item.class} text">${item.category}</div>
            <h4 class="best-card-subtitle">${item.name}</h4>
        </div>
        `;
            bestCards.appendChild(card);
        });
        populatePopap();
}

// Обработчик загрузки страницы
window.addEventListener('load', populateBestCards('all'));

// Обработчики кликов по категориям
allCards.addEventListener('click', function (event) {
    event.preventDefault();
    setActive(allCards);
    populateBestCards('all');
});

forWorkCards.addEventListener('click', function (event) {
    event.preventDefault();
    setActive(forWorkCards);
    populateBestCards('for-work');
});

forHealthCards.addEventListener('click', function (event) {
    event.preventDefault();
    setActive(forHealthCards);
    populateBestCards('for-health');
});

forHarmonyCards.addEventListener('click', function (event) {
    event.preventDefault();
    setActive(forHarmonyCards);
    populateBestCards('for-harmony');
});

function setActive(activeLink) {
    document.querySelectorAll(".best-link").forEach(function (link) {
        link.classList.remove("best-link-active");
    });
    activeLink.classList.add("best-link-active");
}

// Функция для переключения состояния попапа и фона
function togglePopap() {
    popap.classList.toggle("open");
    backgroundPopap.classList.toggle("open");
    if (popap.classList.contains("open")) {
        body.classList.add("no-scroll");
    } else {
        body.classList.remove("no-scroll");
    }
}

//Функция для заполнения попап
function populatePopap() {
    const cards = document.querySelectorAll(".best-card");
    cards.forEach(card => {
        card.addEventListener('click', function () {
            const nameElement = card.querySelector(".best-card-subtitle");
            const cardName = nameElement.textContent;

            for (let item of data.items) {
                if (item.name === cardName) {
                    console.log(cardName);
            //         popap.innerHTML = `
            // `;
                }
            }
            togglePopap();

            // Обработчик клика по крестику
            const close = document.querySelector(".popap-close");
            close.addEventListener("click", togglePopap);
        });
    });
}

// Обработчик клика по фону
backgroundPopap.addEventListener("click", function (event) {
    if (!popap.contains(event.target) && popap.classList.contains("open")) {
        togglePopap();
    }
});
